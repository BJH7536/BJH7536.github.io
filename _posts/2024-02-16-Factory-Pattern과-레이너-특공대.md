---
title:  Factory Pattern과 레이너 특공대
date:   2024-02-16 +0900
categories: [Unity C# 개발]
tags: [Unity, 디자인 패턴, Factory Pattern]
math: true
mermaid: true
---

## Factory Pattern

{% include embed/youtube.html id='U7NWBFYEzis' %}

오늘은 위 영상을 따라 팩토리 패턴, 그 중에서도 추상 팩토리 패턴에 대해서 공부했다.

처음에 개략적인 설명을 들었을 때는, 비슷한 유형의 객체를 다수 생성할 때 사용하면 좋을 것 같아 보였다.

마치 뱀파이어 서바이벌에서 수많이 등장하는 몹이나, 스타크래프트의 유닛들 같이 <br> 
공통 속성을 가지는 수많은 객체들을 만들고, 또 삭제하고, 관리하는 데에 최적화 되어있는 것으로 보인다.

그래서 위 영상을 정독하고, 나는 다음과 같이 정리했다.

### 영상에 대한 나의 정리

#### 데이터를 담아 줄 `SettingDatas.cs`
- 유닛의 타입 별 상태, 수치를 저장

#### 모든 유닛의 틀을 잡아 줄 `Unit.cs` (추상 클래스)
- 변수로 유닛의 고유 상태를 정의하고 들고있는다.
- 유닛의 상태를 UI로 시각화하기 위한 추상함수.
- 유닛의 상태를 업데이트 시키는 추상함수.
- 데미지를 받으면 체력을 깎을 추상함수.
- 유닛의 체력이 0이되면 삭제할 추상함수.
- 레벨업 시 상태값을 증가시켜줄 추상함수.

#### 유닛을 구분하는 `UnitType` 열거형
- 유닛을 두가지로 구분.
	- Soldier 와 Flight

#### Unit 클래스를 상속받을 구체적인 유닛 클래스
- `Soldier.cs`
- `Flight.cs`
- 두 클래스는 모두 `Unit` 클래스의 추상 메서드를 구현.
- 각각의 속성을 반영하여 살짝 다르게 구현. 

#### 유닛의 상태를 시각화하고, 마우스를 통해 유닛과 상호작용할 수 있도록 하는 `GameManager.cs`
- 버튼을 통해 유닛들을 소환하고, 레벨을 올릴 수 있다.
- 마우스 클릭을 통해 상태창을 시각화할 수 있다.
- 마우스 우클릭을 통해 유닛에게 데미지를 줄 수 있다.

#### 유닛들을 관리하는 `UnitManager.cs`
- 소환 가능한 게임오브젝트의 프리팹 배열을 들고있는다.
- 현재 소환된 게임오브젝트의 리스트를 들고있는다.
- 유닛들이 소환될 때, 레벨이 오를 때 읽고쓰는 `SettingDatas` 인스턴스를 들고있는다.
- 유닛을 소환하는 함수.
- 유닛들에게 데미지를 주는 함수.
- 유닛들의 레벨을 올리는 함수.
	- 이미 소환된 유닛들의 성능을 상승시키고, 앞으로 소환될 유닛들도 상승된다.


위와 같이 이해했다.

게임 개발에 처음 입문하고 난 후 부터, 개인적으로 스타크래프트2를 초창기부터 즐겨왔기에 한번 모작을 해봐야겠다는 생각을 종종 하곤 했는데, <bt>

3D이기도 한 데 다, 수많은 유닛들과 건물들을 관리하는 체계를 섣불리 만들었다가 괜히 얼마못가 스파게티처럼 맛있는 프로젝트를 만들어버릴까봐 못하고있다.

그런 의미에서 오늘의 이런 팩토리 패턴을 배운 것은 의미있는 경험이라고 생각한다.


## 나만의 레이너 특공대

그래서, 오늘 배운 것의 이해를 더하고 나름대로의 가시적인 결과물을 만들어보고자,

위 영상에서 배운 것을 응용해 나만의 레이너 특공대를 만들어보고자 한다.


![image](https://github.com/BJH7536/BJH7536.github.io/assets/114412598/2f5c3da7-8989-4cd4-9b7c-4d515a833dec)

우선, 그냥 밋밋한 큐브나 캡슐을 쓰기 싫어서 나만의 해병을 만들어주었다.

그리고 간단히 체력 / 공격력 / 방어력을 구현해주었다.<br>
그리고 해병의 트레이드 마크인, 전투 방패를 구현했다.

전투 방패는 인게임에서 업그레이드 형태의 개념으로, <br>
한번 비용을 지불해 업그레이드를 진행하면 일정시간 후에 모든 해병에게 전투 방패가 생긴다.

전투 방패를 든 해병은 체력이 기존 45에서 55로 상향되는 효과를 얻으며, <br>
스타크래프트2의 모든 업그레이드가 그러하듯 이미 소환된 해병과 앞으로 소환될 해병 모두에게 적용된다.

상당히 매력적인 업그레이드이지만, 사실 본인은 싫어한다. <br> 주종이 저그이기 때문에...

아무튼 그리고 이와 비슷한 업그레이드 개념인 보병 공업과 방업도 구현해주었다.

이 공업과 방업은 스타크래프트2의 공업과 방업을 동일하게 구현해주었다. 하나 다른점이 있다면, 나만의 레이너 특공대는 짱짱 쎄기 때문에 업그레이드 횟수에 제한이 없다.

아무튼 그래서 다음은 그 결과물이다.

![TestingProject - FactoryPatternScene - Windows, Mac, Linux - Unity 2022 3 17f1_ _DX11_ 2024-02-16 18-22-05](https://github.com/BJH7536/BJH7536.github.io/assets/114412598/f65e295a-ab3c-4209-8e51-4680b7178c28)
